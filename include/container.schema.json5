{
	$schema: "http://json-schema.org/draft-07/schema",
	required: [ "hostname" ],
	properties: {
		hostname: { type: "string" },
		unit: {
			type: "object",
			properties: {
				dependency: { type: "array", items: { type: "string" } }
			},
		},
		mount: {
			type: "array",
			items: {
				type: "object",
				required: [ "type", "host", "destination" ],
				properties: {
					type: {
						type: "string",
						enum: [ "root", "share", "data", "source", "volume", "tmpfs" ]
					},
					host: { type: "string" },
					destination: { type: "string" },
					options: {
						type: "array",
						items: { type: "string", enum: [ "readonly" ] }
					}
				}
			}
		},
		bind: {
			type: "object",
			properties: {
				initConfig: { type: "string" },
				configWritable: { type: "boolean" },
				config: { type: "array", items: { type: "string" } },
				cache: { type: "array", items: { type: "string" } },
				log: { type: "array", items: { type: "string" } },
				socket: { type: "array", items: { type: "string" } }
			}
		},
		network: {
			type: "object",
			properties: {
				type: {
					type: "string",
					enum: [ "disable", "hostonly", "bridge" ]
				},
				br: {
					type: "string"
				}
			}
		},
		install: {
			properties: {
				packages: { type: "array", items: { type: "string" } },
				packagesFile: { type: "string" },
				copyFiles: {
					type: "object",
					additionalProperties: { type: "string" }
				},
				inject: {
					type: "array",
					items: {
						type: "string",
						enum: [ "dnf", "ssh-keys" ]
					}
				}
			}
		},
		service: {
			type: "object",
			additionalProperties: {
				type: "object",
				required: [ "enabled" ],
				properties: {
					enabled: {
						type: [ "boolean", "array" ],
						items: { type: "string" }
					},
					template: { type: "string" },
					overwrite: { type: "string" }
				}
			}
		},
		download: {
			type: "array",
			items: {
				type: "object",
				oneOf: [
					{
						required: [ "type", "url", "saveTo" ],
						properties: {
							type: { type: "string", enum: [ "git", "github" ] },
							url: { type: "string" },
							saveTo: { type: "string" },
							branch: { type: "string" }
						}
					},
					{
						required: [ "url", "saveTo", "extract" ],
						properties: {
							type: { type: "string", enum: [ "normal" ] },
							url: { type: "string" },
							saveTo: { type: "string" },
							extract: { type: "boolean" },
							stripPath: { type: "number" }
						}
					}
				]
			}
		},
		compile: {
			type: "array",
			items: {
				type: "object",
				required: [ "title", "script", "artifacts" ],
				properties: {
					title: { type: "string" },
					script: { type: "string" },
					artifacts: { type: "string" },
					requirements: {
						type: "object",
						properties: {
							packages: { type: "array", items: { type: "string" } },
							packagesFile: { type: "string" }
						}
					}
				}
			}
		},
		environment: {
			type: "object",
			additionalProperties: { type: "string" }
		},
		postscript: { type: "string" }
	}
}